os: linux
dist: trusty
sudo: required
language: java
jdk:
- oraclejdk8
branches:
  only:
  - master
  - develop
before_install:
- mkdir -p ~/.m2; wget -q -O ~/.m2/settings.xml https://raw.githubusercontent.com/AtlasOfLivingAustralia/travis-build-configuration/master/travis_maven_settings_simple.xml
- sudo mkdir -p /data/lucene; sudo wget -O /data/lucene/namematching-20200214.tgz https://archives.ala.org.au/archives/nameindexes/20200214/namematching-20200214.tgz
- cd /data/lucene
- sudo tar zxvf namematching-20200214.tgz
- sudo ln -s namematching-20200214 namematching
- ls -laF
- cd $TRAVIS_BUILD_DIR
- echo TRAVIS_PULL_REQUEST = ${TRAVIS_PULL_REQUEST}
script:
- '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && mvn -P travis clean install deploy || mvn -P travis clean install'
env:
  global:
  - secure: "qTU5D1LDpynTGTK6xFqOZGhKxhHzKLmyqCizFvR1PCyWfjax7i/4bKWB1acVIAwqbePQ8qQQ1F5R6+sesXvbQxJm8w45xwcyFdabr4P4rQ1e0PkgSRm19K4oEvamGXYyFnJvrNOnl7BEYucifjm4VNAGMqlPDU8DIcII8ULldVG4t0TitWyQbn/oGzVq7s/vFs699q3AQyMPqaiWyLPk+bo28E56KwcYG1RH8/GnIP95EfeWEaqIGXjXc2O16+XLgGitMU5PmQ/LhixWfuD1fJld09DBIhCrvd5bgeVVoM0Fyd7qMPzlvjG9Pyo06tqpbn+h1G1H8NOxuldA247UpyigawNAO9DEFHj/nyjy5hN4JtXYXAZoUYm1h/jQYAwh8gsEpztG+rYCEt2+6qcdyU/Dl9Q1ORaB7XXbjTAJnqQA+9IxyKPFetWOOtQD0FxHE2DsEoSmqcE7HC6/ZF+RbHL9CremnlJcNvwv3Kmd68811b/+6knHgIp+F4UspTC6NuiD5JfowG/FdneEMvYOA2tyFG6wileUI7Qs0Uznh2SVQAY/hxpoyefc0vXzSh1XSPoPwsjuZUtdhxZFnYkIawIhYx4IRx6WWTtCc2GtbRg+Mc577UAldkn2nF8Te5opC7ZemYq677NgvtCqFDbuGgnFPDJl3c4SNsKtxuY+taQ="  - secure: mHezyDR2h4MXyxj2IjYgezSrLkgIa3zgsmWlsHV28O2nVxIX1tbSWJ6jzYvNAtdonN8GHe9TCtz60SQCrTfZZ052jzAu3XrfR4VojL9iTnteLMfrzCzvSpmU/dbrlmgz6bhZmVbbZwH6CvutYaViaroXpKDHWbzWL/3eoWhnFIS+A8uXdyzShMFAZlU3zAxPVsQiC2pSxhQ99sFNdqnro22aCOoDEuaV6hUT6XXVqgPBgPVjdxIIT9/OwN1pzcOTA9UNoSFdRHCif/k+ICoKv59c9MfM3SAR1qeUydLeK/ITDS/FjE+z0+8rMSzHqTmnej6+x2/ZEYfKcmoRdxtGqn4s/TEJx1qXRnEAcnK9zfKhhJGU65/rV6BCEHad1L51I8YRxazeBWaxGm27ervA7pVkjOSh+sAyPSHeu7kqoCMwbvzN2BpCnzwfZQOm+/4DQrEzw5gqXVFDUnhRvekutlqsprZLe1oAcnALlMF20N++Gj2riq+7TIaa0v7C3sRpcr9fXPlNP30SzDO5lmV3hbWuMtOx3tSKoGfR6v9KCMZwLcIYxfS3m+/QHI56lMaV3LXI8nMd/5wHe6ZAIKIfgAe3wfIB+7C5N9ZUioqhigeAiqUElJIwx2TuRtwC9XB5gVgXGpCtBoXlKdVeu28nvylTu77R8Mjlf4TNFwSwe5s=
  - secure: "CVH5DiVCiyfcTPhEUbqhQdHYSmXtOoNwh8zaPBad3YB+YmGAXSAi+h19cMOcHH3edng9ktXjMM+peyd10c18Hgn/wX8wHb7Bgn/fPr2KHhP81r8BUZMD5xHPctmvRDSI8sKDRXr3wpf8OpA8l6nCKEob6j3jO0sn560mbZkEuwFCVUDzg4jeH50ARJn89aGaiSe4q9FvCsBroEoWysoMJyDd5llpJyB0SU8nRye96xaPYUOD/KfHaehv26vE+EWULonO9A3fSsS9ds3wIFHrhc5TJNr5l2Rruqi5h4axVvkLcYtHX8SSrkcsMuCxrllA2lVs38ZWKROyo80CtFyFlX0kEBrs84GtVAQo9CuiW+EZQKAHuCltzb+7HIKddSlqtHe339mCGXCs8hBPBmnuCLYuxTt7fVYZKMiJFQxvF7IFf9uJWV8uzCfN+fPdtMsn1eoUjrYji8Jdc0t5xotjS6irwPl/OnI48xQ0tzC/FE6U2aUjBCVt52XZEJLLrNs4A49VxFIf3m1QSWh1xSlspixc/O/r58tHf10jh6zVhk1rCo8XTDpmjHFcKu+4KzT635+aHFxrVwq3GgV5mFQgpH+xTuCIQC5Xwq0pIYaaVVR7J6y8ZxBzzVZrfO16X3+MjDUyjxV0270WMxvQoIsjKovVxXedFsvAgYcLsgHA7Z4="